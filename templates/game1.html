<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Card Game with Timer, Confetti, and Next Game Button</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            text-align: center;
        }

        h1 {
            color: #333;
        }

        #timer {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
        }

        .memory-game {
            display: grid;
            grid-template-columns: repeat(3, 150px);
            grid-gap: 10px;
            justify-content: center;
            margin: 20px auto;
        }

        .memory-card {
            width: 150px;
            height: 100px;
            position: relative;
            cursor: pointer;
            perspective: 1000px;
        }

        .memory-card .inner-card {
            width: 100%;
            height: 100%;
            transition: transform 0.5s;
            transform-style: preserve-3d;
            position: relative;
        }

        .memory-card.flipped .inner-card {
            transform: rotateY(180deg);
        }

        .memory-card.matched .inner-card {
            background-color: #28a745; /* Green background */
            color: white; /* Text turns white on green cards */
        }

        .memory-card .front, .memory-card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
        }

        .memory-card .front {
            background-color: #333;
            color: #fff;
            font-size: 24px;
        }

        .memory-card .back {
            background-color: #fff;
            color: #333;
            transform: rotateY(180deg);
            font-size: 14px;
            padding: 10px;
            border: 2px solid #333;
        }

        .tick-back {
            font-size: 30px;
            color: #fff;
        }

        /* Confetti styles */
        .confetti {
            position: absolute;
            top: 0; /* Start confetti from top */
            width: 10px;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(100vh);
            }
        }

        /* Blurred effect on cards when game ends */
        .blurred {
            filter: blur(5px);
        }

        /* Next Game Button */
        #next-game-btn {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #007bff;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.5s ease;
        }

        #next-game-btn.show {
            display: block;
        }

        #next-game-btn:hover {
            background-color: #0056b3;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
        }

        .overlay.show {
            display: block;
        }

    </style>
</head>
<body>

<h1>Anti-Drug Abuse Memory Game</h1>
<div id="timer">Time: 0s</div>
<div class="memory-game"></div>

<!-- Overlay to blur the cards and add button on top -->
<div class="overlay" id="overlay"></div>

<!-- Next Game Button -->
<button id="next-game-btn">Next Game</button>

<script>
    const cardsArray = [
        "Drugs destroy dreams.",
        "Be stronger than your addiction.",
        "Say no to drugs, say yes to life.",
        "Life is better without drugs.",
        "You don't need drugs to be cool.",
        "Drugs ruin lives, don't let them ruin yours.",
        "Stay drug-free for a healthier life.",
        "Drugs are a dead-end street.",
        "Choose life, not drugs."
    ];

    // Duplicate the cards to create pairs
    let cardDeck = [...cardsArray, ...cardsArray];

    // Shuffle the cards
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
    shuffle(cardDeck);

    // Create memory game board
    const memoryGame = document.querySelector('.memory-game');
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let matchesFound = 0;

    cardDeck.forEach((quote, index) => {
        const card = document.createElement('div');
        card.classList.add('memory-card');
        card.innerHTML = `
            <div class="inner-card">
                <div class="front">?</div>
                <div class="back">${quote}</div>
            </div>
        `;
        memoryGame.appendChild(card);
    });

    // Timer
    let timer = 0;
    let timerInterval = setInterval(() => {
        timer++;
        document.getElementById('timer').textContent = `Time: ${timer}s`;
    }, 1000);

    function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return;

        this.classList.add('flipped');

        if (!firstCard) {
            firstCard = this;
            return;
        }

        secondCard = this;
        checkForMatch();
    }

    function checkForMatch() {
        const isMatch = firstCard.querySelector('.back').textContent === secondCard.querySelector('.back').textContent;
        isMatch ? matchCards() : unflipCards();
    }

    function matchCards() {
        firstCard.classList.add('matched');
        secondCard.classList.add('matched');

        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);

        matchesFound++;

        if (matchesFound === cardsArray.length) {
            clearInterval(timerInterval);
            setTimeout(() => {
                turnAllCardsGreen(); // All cards turn green
                setTimeout(() => {
                    confettiEffect();
                    showNextGameButton(); // Show the next game button
                }, 1500);
            }, 500);
        }

        resetBoard();
    }

    function unflipCards() {
        lockBoard = true;
        setTimeout(() => {
            firstCard.classList.remove('flipped');
            secondCard.classList.remove('flipped');
            resetBoard();
        }, 1000);
    }

    function resetBoard() {
        [firstCard, secondCard, lockBoard] = [null, null, false];
    }

    // Turn all cards green after all matches are found
    function turnAllCardsGreen() {
        const allCards = document.querySelectorAll('.memory-card');
        allCards.forEach(card => {
            card.classList.add('matched'); // Add the green background
            card.querySelector('.front').textContent = "âœ“"; // Change question mark to tick symbol
        });
    }

    // Confetti effect from the top
    function confettiEffect() {
        for (let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = `${Math.random() * 100}vw`;
            confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
            confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
            document.body.appendChild(confetti);
            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }
    }

    // Show "Next Game" button after all matches are found
    function showNextGameButton() {
        const nextGameBtn = document.getElementById('next-game-btn');
        const overlay = document.getElementById('overlay');
        
        nextGameBtn.classList.add('show');
        overlay.classList.add('show');
        
        memoryGame.classList.add('blurred'); // Blur the memory cards
    }

    // Reset game when all cards are matched
    function resetGame() {
        const allCards = document.querySelectorAll('.memory-card');
        allCards.forEach(card => {
            card.classList.remove('flipped', 'matched');
        });
        shuffle(cardDeck);
        clearInterval(timerInterval);
        timer = 0;
        matchesFound = 0;
        timerInterval = setInterval(() => {
            timer++;
            document.getElementById('timer').textContent = `Time: ${timer}s`;
        }, 1000);
    }

    // Attach event listener to each card
    const allCards = document.querySelectorAll('.memory-card');
    allCards.forEach(card => card.addEventListener('click', flipCard));

    // Redirect to next game when button is clicked
    document.getElementById('next-game-btn').addEventListener('click', () => {
        window.location.href = '/game2'; // Redirect to /game2
    });

</script>
</body>
</html>
